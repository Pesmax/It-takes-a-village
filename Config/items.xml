<configs>

<!-- Locking forged items behind smelter perk -->
<append xpath="//item[@name='resourceForgedIron']">
	<property name="UnlockedBy" value="perkSmelterITAV"/>
</append>
<append xpath="//item[@name='resourceForgedSteel']">
	<property name="UnlockedBy" value="perkSmelterITAV"/>
</append>
<append xpath="//item[@name='toolForgeCrucible']">
	<property name="UnlockedBy" value="perkSmelterITAV"/>
</append>	

<!-- Making items unlockable by the correct ITAV perk -->
<setattribute xpath="/items/item/property[contains(@value, 'perkAdvancedEngineering')]" name="value">perkSmelterITAV</setattribute>
<setattribute xpath="/items/item/property[contains(@value, 'perkMasterChef')]" name="value">perkCookITAV</setattribute>

<!-- MINER -->

<setattribute xpath="//passive_effect[@tags='perkMiner69r']" name="tags">perkMinerITAV</setattribute>
<setattribute xpath="//passive_effect[@tags='perkMiner69r,axe']" name="tags">perkMinerITAV,axe</setattribute>
<setattribute xpath="//passive_effect[@tags='perkMiner69r,miningTool']" name="tags">perkMinerITAV,miningTool</setattribute>
<setattribute xpath="/items/item[@name='meleeToolRepairT1ClawHammer']/property[@name='Tags']" name="value">melee,light,tool,repairTool,longshaft,attStrength,perkMinerITAV,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeToolRepairT1ClawHammer']/property[@name='UnlockedBy']" name="value">perkMinerITAV</setattribute>
<setattribute xpath="/items/item[@name='meleeToolRepairT3Nailgun']/property[@name='Tags']" name="value">tool,nailgun,sideAttachments,repairTool,attStrength,perkMinerITAV,canHaveCosmetic,noMods</setattribute>
<setattribute xpath="/items/item[@name='meleeToolAxeT1IronFireaxe']/property[@name='Tags']" name="value">axe,melee,grunting,medium,tool,longShaft,attStrength,perkMinerITAV,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeToolAxeT1IronFireaxe']/property[@name='UnlockedBy']" name="value">perkMinerITAV</setattribute>
<setattribute xpath="/items/item[@name='meleeToolPickT1IronPickaxe']/property[@name='Tags']" name="value">melee,grunting,medium,tool,longShaft,attStrength,perkMinerITAV,miningTool,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeToolPickT1IronPickaxe']/property[@name='UnlockedBy']" name="value">perkMinerITAV</setattribute>
<setattribute xpath="/items/item[@name='meleeToolShovelT0StoneShovel']/property[@name='Tags']" name="value">melee,grunting,medium,tool,longShaft,shovel,attStrength,perkMinerITAV,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeToolShovelT1IronShovel']/property[@name='Tags']" name="value">melee,grunting,medium,tool,longShaft,shovel,attStrength,perkMinerITAV,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeToolShovelT1IronShovel']/property[@name='UnlockedBy']" name="value">perkMinerITAV</setattribute>
<setattribute xpath="/items/item[@name='meleeToolShovelT2SteelShovel']/property[@name='Tags']" name="value">melee,grunting,medium,tool,longShaft,shovel,attStrength,perkMinerITAV,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeToolAxeT3Chainsaw']/property[@name='Tags']" name="value">melee,heavy,tool,motorTool,attStrength,perkMinerITAV,chainsaw,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeToolPickT3Auger']/property[@name='Tags']" name="value">melee,heavy,tool,motorTool,attStrength,perkMinerITAV,miningTool,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeToolHammerOfGodAdmin']/property[@name='Tags']" name="value">melee,light,tool,attStrength,perkMinerITAV,admin,noMods</setattribute>


<!-- HUNTER -->
<setattribute xpath="/items/item[@name='meleeToolRepairT0StoneAxe']/property[@name='Tags']" name="value">axe,melee,light,tool,longShaft,repairTool,miningTool,attStrength,perkMinerITAV,perkHunterITAV,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeToolRepairT0TazasStoneAxe']/property[@name='Tags']" name="value">axe,melee,light,tool,longShaft,tazas,repairTool,miningTool,attStrength,perkMinerITAV,perkHunterITAV,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeWpnBladeT0BoneKnife']/property[@name='Tags']" name="value">knife,melee,grunting,light,perkFlurryOfBlows,weapon,meleeWeapon,attAgility,perkDeepCuts,perkHunterITAV,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeWpnBladeT1HuntingKnife']/property[@name='Tags']" name="value">knife,melee,grunting,light,perkFlurryOfBlows,weapon,meleeWeapon,attAgility,perkDeepCuts,perkHunterITAV,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeWpnBladeT1CandyKnife']/property[@name='Tags']" name="value">knife,melee,grunting,light,perkFlurryOfBlows,weapon,meleeWeapon,attAgility,perkDeepCuts,perkHunterITAV,canHaveCosmetic</setattribute>
<setattribute xpath="/items/item[@name='meleeWpnBladeT3Machete']/property[@name='Tags']" name="value">machete,melee,grunting,light,longShaft,perkFlurryOfBlows,weapon,meleeWeapon,attAgility,perkDeepCuts,perkHunterITAV,canHaveCosmetic</setattribute>
<!-- <setattribute xpath="/items/item/property[contains(@value, 'perkMiner69r')]" name="value">perkMinerITAV</setattribute>
<setattribute xpath="/items/item/property[contains(@value, 'perkTheHuntsman')]" name="value">perkHunterITAV</setattribute> -->







<append xpath="/items"> 

<!-- Adding Profession Books to unlock holding more Professions -->
<!-- My FIRST Profession -->
<item name="qb_MyFirstProfessionITAV">
	<property name="Extends" value="questMaster"/>
	<property name="CreativeMode" value="Player"/>
	<property name="CustomIcon" value="metalSignLetter_1"/>
	<property name="DescriptionKey" value="qb_MyFirstProfessionITAV_desc"/>
	<property name="EconomicValue" value="400"/>
	<property name="Stacknumber" value="1"/>
	<property name="SellableToTrader" value="false" />
	<property name="PickupJournalEntry" value="MyFirstProfessionTip"/>
	<property class="Action0">
		<property name="QuestGiven" value="quest_MyFirstProfession" />
		 <requirement name="CVarCompare" cvar="numberOfProfessionsKnown" operation="Equals" value="0" desc_key="reqProfessionsLevel00ITAV" />
	</property>
</item>

<!-- My SECOND Profession -->
<item name="qb_MySecondProfessionITAV">
	<property name="Extends" value="questMaster"/>
	<property name="CreativeMode" value="Player"/>
	<property name="CustomIcon" value="metalSignLetter_2"/>
	<property name="DescriptionKey" value="qb_MySecondProfessionITAV_desc"/>
	<property name="EconomicValue" value="400"/>
	<property name="Stacknumber" value="1"/>
	<property name="SellableToTrader" value="false" />
	<property class="Action0">
		<property name="QuestGiven" value="quest_MySecondProfession" />
		<requirement name="CVarCompare" cvar="numberOfProfessionsKnown" operation="Equals" value="1" />
		<requirement name="CVarCompare" cvar="numberOfProfessionsAllowed" operation="Equals" value="2" />
	</property>
</item>

<!-- My THIRD Profession -->
<!-- My FOURTH Profession -->

<!-- Adding Trade Profession Perk Books to unlock specific Professions -->
<!-- Master -->
<item name="bookMasterITAV">
    <property name="Extends" value="schematicMaster"/>
    <property name="CustomIcon" value="bookMasterITAV"/> <!-- Required or Master icon is used -->
    <property name="DescriptionKey" value="perkFiremansAlmanacHeatLongDesc"/>
    <property name="Stacknumber" value="2"/>
    <property name="EconomicValue" value="500"/>
    <property name="Group" value="Books,Mods,BooksOnly"/>
	<property name="SellableToTrader" value="false" />
    <property class="Action0">
        <property name="Class" value="Eat"/>
        <property name="Delay" value="1.0"/>
        <property name="Use_time" value="..."/>
        <property name="Sound_start" value="read_skillbook"/>
		<requirement name="CVarCompare" cvar="numberOfProfessionsAllowed" operation="GT" value="@numberOfProfessionsKnown" />
    </property>
</item>

<!-- SMELTER -->
<item name="bookSmelterITAV">
    <property name="Extends" value="bookMasterITAV"/>
    <property name="CustomIcon" value="bookSmelterITAV"/>
    <property name="DescriptionKey" value="bookSmelterITAVDesc"/>
    <property name="Unlocks" value="perkSmelterITAV"/>
    <property class="Action0">
		<requirement name="ProgressionLevel" progression_name="perkSmelterITAV" operation="LT" value="1" />
    </property>
    <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="SetProgressionLevel" progression_name="perkSmelterITAV" level="1">
			<requirement name="ProgressionLevel" progression_name="perkSmelterITAV" operation="LT" value="1" />
		</triggered_effect> 
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="perkSmelterITAV" operation="set" value="1"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="hasLearntSmelterITAV" operation="set" value="1"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ShowToolbeltMessage" message_key="hasLearntSmelterITAVTooltip"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="numberOfProfessionsKnown" operation="add" value="1"/>		
    </effect_group>
</item>

<!-- MINER -->
<item name="bookMinerITAV">
    <property name="Extends" value="bookMasterITAV"/>
    <property name="CustomIcon" value="bookMinerITAV"/>
    <property name="DescriptionKey" value="bookMinerITAVDesc"/>
    <property name="Unlocks" value="perkMinerITAV"/>
    <property class="Action0">
		<requirement name="ProgressionLevel" progression_name="perkMinerITAV" operation="LT" value="1" />
    </property>
    <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="SetProgressionLevel" progression_name="perkMinerITAV" level="1">
			<requirement name="ProgressionLevel" progression_name="perkMinerITAV" operation="LT" value="1" />
		</triggered_effect>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="perkMinerITAV" operation="set" value="1"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="hasLearntMinerITAV" operation="set" value="1"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ShowToolbeltMessage" message_key="hasLearntMinerITAVTooltip"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="numberOfProfessionsKnown" operation="add" value="1"/>
	</effect_group>
</item>

<!-- HUNTER -->
<item name="bookHunterITAV">
    <property name="Extends" value="bookMasterITAV"/>
    <property name="CustomIcon" value="bookHunterITAV"/>
    <property name="DescriptionKey" value="bookHunterITAVDesc"/>
    <property name="Unlocks" value="perkHunterITAV"/>
    <property class="Action0">
		<requirement name="ProgressionLevel" progression_name="perkHunterITAV" operation="LT" value="1" />
    </property>
    <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="SetProgressionLevel" progression_name="perkHunterITAV" level="1">
			<requirement name="ProgressionLevel" progression_name="perkHunterITAV" operation="LT" value="1" />
		</triggered_effect>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="perkHunterITAV" operation="set" value="1"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="hasLearntHunterITAV" operation="set" value="1"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ShowToolbeltMessage" message_key="hasLearntHunterITAVTooltip"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="numberOfProfessionsKnown" operation="add" value="1"/>
    </effect_group>
</item>

<!-- COOK -->
<item name="bookCookITAV">
    <property name="Extends" value="bookMasterITAV"/>
    <property name="CustomIcon" value="bookCookITAV"/>
    <property name="DescriptionKey" value="bookCookITAVDesc"/>
    <property name="Unlocks" value="perkCookITAV"/>
    <property class="Action0">
		<requirement name="ProgressionLevel" progression_name="perkCookITAV" operation="LT" value="1" />
    </property>
    <effect_group tiered="false">
        <triggered_effect trigger="onSelfPrimaryActionEnd" action="SetProgressionLevel" progression_name="perkCookITAV" level="1">
			<requirement name="ProgressionLevel" progression_name="perkCookITAV" operation="LT" value="1" />
		</triggered_effect>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="perkCookITAV" operation="set" value="1"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="hasLearntCookITAV" operation="set" value="1"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ShowToolbeltMessage" message_key="hasLearntCookITAVTooltip"/>
		<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="numberOfProfessionsKnown" operation="add" value="1"/>
    </effect_group>
</item>

<!-- ProfPerkForgettingElixir -->
<item name="drinkJarProfPerkForgettingElixir"> <!-- respec potion, player version -->
	<property name="CustomIcon" value="drinkJarGrandpasForgettingElixir" />
	<property name="CustomIconTint" value="4571ad" />
	<property name="HoldType" value="3"/>
	<property name="Meshfile" value="#Other/Items?Food/bottled_waterPrefab.prefab"/>
	<property name="DropMeshfile" value="#Other/Items?Misc/sack_droppedPrefab.prefab"/>
	<property name="Material" value="Mglass"/>
	<property name="Weight" value="10"/>
	<property name="Stacknumber" value="10"/> <!-- STK resource -->
	<property name="EconomicValue" value="20000"/>
	<property name="SellableToTrader" value="false"/>
	<property name="Group" value="Food/Cooking,CFDrink/Cooking"/>
	<property class="Action0">
		<property name="Class" value="Eat"/>
		<property name="Delay" value="1"/>
		<property name="Use_time" value="..."/>
		<property name="Sound_start" value="player_drinking"/>
		<property name="Create_item" value="drinkJarEmpty"/>
	</property>
	<effect_group tiered="false" name="Drink Tier Trader">
		<requirement name="NotHasBuff" buff="buffIsOnFire"/>
			<!-- <triggered_effect trigger="onSelfPrimaryActionEnd" action="ResetProgression" reset_books="false"/>  This resets all progression, across attributes and perks. -->
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="hasLearntSmelterITAV" operation="set" value="0"/>
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="numberOfProfessionsAllowed" operation="set" value="1"/>
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="numberOfProfessionsKnown" operation="set" value="0"/>
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="PlaySound" sound="player#death" play_in_head="true"/>
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="PlaySound" sound="player_death_stinger" play_in_head="true"/>
			<triggered_effect trigger="onSelfPrimaryActionEnd" action="ShowToolbeltMessage" message_key="drinkJarProfPerkForgettingElixirTooltip"/>
	</effect_group>
</item>


</append>




</configs>